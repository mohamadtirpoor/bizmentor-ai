# ุณุณุชู ุงุฏฺฏุฑ ููุด ูุตููุน ุจุฒูุณโูุชุฑ

## ๐ ูุนุฑู

ุณุณุชู ุงุฏฺฏุฑ ููุด ูุตููุน ุจุฒูุณโูุชุฑ ฺฉ ุณุณุชู ุฎูุฏฺฉุงุฑ ุงุณุช ฺฉู ุงุฒ ูฺฉุงููุงุช ฺฉุงุฑุจุฑุงู ุงุฏ ูโฺฏุฑุฏ ู ุฏุงูุด ุฌุฏุฏ ุฑุง ุจุฑุง ุจูุจูุฏ ูพุงุณุฎโูุง ุขูุฏู ุฐุฎุฑู ูโฺฉูุฏ.

## ๐ฏ ูฺฺฏโูุง

### 1. ุงุฏฺฏุฑ ุฎูุฏฺฉุงุฑ
- **ุงุณุชุฎุฑุงุฌ ุฎูุฏฺฉุงุฑ ุณูุงู ู ุฌูุงุจ**: ุณุณุชู ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุฌูุช ุณูุงู-ุฌูุงุจ ุฑุง ุงุฒ ูฺฉุงููุงุช ุงุณุชุฎุฑุงุฌ ูโฺฉูุฏ
- **ุฏุณุชูโุจูุฏ ููุดููุฏ**: ุณูุงูุงุช ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุฏุฑ ุฏุณุชูโูุง ูุฎุชูู (ูุงูุ ูุงุฑฺฉุชูฺฏุ ูุฑูุดุ ููุงุจุน ุงูุณุงูุ ูุฏุฑุช ูุญุตูู) ุทุจููโุจูุฏ ูโุดููุฏ
- **ููุชุฑ ฺฉูุช**: ููุท ุณูุงู ู ุฌูุงุจโูุง ุจุง ฺฉูุช ุฐุฎุฑู ูโุดููุฏ

### 2. ุงูุชุงุฒุฏู ฺฉูุช
- **Quality Score**: ูุฑ ุฏุงูุด ฺฉ ุงูุชุงุฒ ฺฉูุช ุฏุงุฑุฏ ฺฉู ุจุง ุงุณุชูุงุฏู ูฺฉุฑุฑ ุงูุฒุงุด ูโุงุจุฏ
- **Usage Count**: ุชุนุฏุงุฏ ุฏูุนุงุช ุงุณุชูุงุฏู ุงุฒ ูุฑ ุฏุงูุด ุฑุฏุงุจ ูโุดูุฏ
- **ุจุงุฒุฎูุฑุฏ ฺฉุงุฑุจุฑุงู**: ุจุงุฒุฎูุฑุฏ ูุซุจุช ฺฉุงุฑุจุฑุงู ุงูุชุงุฒ ฺฉูุช ุฑุง ุงูุฒุงุด ูโุฏูุฏ

### 3. ุงุณุชูุงุฏู ููุดููุฏ ุงุฒ ุฏุงูุด
- **ุฌุณุชุฌู ูุฑุชุจุท**: ููฺฏุงู ูพุงุณุฎ ุจู ุณูุงูุงุช ุฌุฏุฏุ ุฏุงูุด ูุฑุชุจุท ุงุฒ ุฏุชุงุจุณ ุฌุณุชุฌู ูโุดูุฏ
- **ุงุถุงูู ุดุฏู ุจู Context**: ุฏุงูุด ูุฑุชุจุท ุจู context ูุฏู ุงุถุงูู ูโุดูุฏ ุชุง ูพุงุณุฎโูุง ุจูุชุฑ ุงุฑุงุฆู ุดูุฏ
- **ุงูููุชโุจูุฏ**: ุฏุงูุด ุจุง ุงูุชุงุฒ ฺฉูุช ุจุงูุงุชุฑ ุงูููุช ุฏุงุฑุฏ

### 4. ูพูู ูุฏุฑุช
- **ูุดุงูุฏู ุฏุงูุด**: ูุดุงูุฏู ุชูุงู ุฏุงูุด ุงุฏฺฏุฑ ุดุฏู ุจุง ุฌุฒุฆุงุช ฺฉุงูู
- **ููุชุฑ ุฏุณุชูโุจูุฏ**: ููุชุฑ ฺฉุฑุฏู ุฏุงูุด ุจุฑ ุงุณุงุณ ุฏุณุชูโุจูุฏ
- **ุญุฐู ุฏุงูุด**: ุญุฐู ุฏุงูุด ูุงูุฑุชุจุท ุง ุงุดุชุจุงู
- **ุขูุงุฑ ุงุฏฺฏุฑ**: ูุดุงูุฏู ุขูุงุฑ ฺฉุงูู ุงุฏฺฏุฑ (ุชุนุฏุงุฏ ฺฉูุ ูุงูฺฏู ฺฉูุชุ ุชุนุฏุงุฏ ุงุณุชูุงุฏู)

## ๐๏ธ ุณุงุฎุชุงุฑ ุฏุชุงุจุณ

### ุฌุฏูู `learned_knowledge`
```sql
CREATE TABLE learned_knowledge (
  id SERIAL PRIMARY KEY,
  question TEXT NOT NULL,              -- ุณูุงู ฺฉุงุฑุจุฑ
  answer TEXT NOT NULL,                -- ูพุงุณุฎ ูุฏู
  category TEXT,                       -- ุฏุณุชูโุจูุฏ (ูุงูุ ูุงุฑฺฉุชูฺฏุ ...)
  quality_score INTEGER DEFAULT 0,    -- ุงูุชุงุฒ ฺฉูุช
  usage_count INTEGER DEFAULT 0,      -- ุชุนุฏุงุฏ ุงุณุชูุงุฏู
  source_message_id INTEGER,          -- ุดูุงุณู ูพุงู ููุจุน
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

### ุฌุฏูู `conversation_feedback`
```sql
CREATE TABLE conversation_feedback (
  id SERIAL PRIMARY KEY,
  chat_id INTEGER REFERENCES chats(id),
  message_id INTEGER REFERENCES messages(id),
  is_helpful BOOLEAN,                 -- ุขุง ูพุงุณุฎ ููุฏ ุจูุฏุ
  feedback_text TEXT,                 -- ูุชู ุจุงุฒุฎูุฑุฏ
  created_at TIMESTAMP DEFAULT NOW()
);
```

## ๐ง ูุญูู ุงุณุชูุงุฏู

### 1. ุงุฏฺฏุฑ ุฎูุฏฺฉุงุฑ
ุงุฏฺฏุฑ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ููฺฏุงู ุฐุฎุฑู ูพุงูโูุง ุฌุฏุฏ ุงูุฌุงู ูโุดูุฏ:

```typescript
// ููฺฏุงู ุฐุฎุฑู ูพุงู ูุฏู
if (role === 'model') {
  await saveLearnedKnowledge({
    question: userMessage.content,
    answer: modelMessage.content,
  }, messageId);
}
```

### 2. ูพุฑุฏุงุฒุด ุฏุณุช ูฺฉุงููุงุช
ุงุฏูู ูโุชูุงูุฏ ุจู ุตูุฑุช ุฏุณุช ูฺฉุงููุงุช ุฑุง ูพุฑุฏุงุฒุด ฺฉูุฏ:

```bash
POST /api/admin/process-learning
```

ุงู API ูฺฉุงููุงุช 24 ุณุงุนุช ฺฏุฐุดุชู ุฑุง ูพุฑุฏุงุฒุด ูโฺฉูุฏ ู ุฏุงูุด ุฌุฏุฏ ุงุณุชุฎุฑุงุฌ ูโฺฉูุฏ.

### 3. ุฏุฑุงูุช ุฏุงูุด ูุฑุชุจุท
ููฺฏุงู ูพุงุณุฎ ุจู ุณูุงู ฺฉุงุฑุจุฑุ ุฏุงูุด ูุฑุชุจุท ุจู context ุงุถุงูู ูโุดูุฏ:

```typescript
const learnedKnowledge = await getRelevantKnowledge(userQuestion, 3);
// ุฏุงูุด ุจู system message ุงุถุงูู ูโุดูุฏ
```

### 4. ุซุจุช ุจุงุฒุฎูุฑุฏ
ฺฉุงุฑุจุฑุงู ูโุชูุงููุฏ ุจุงุฒุฎูุฑุฏ ุฎูุฏ ุฑุง ุซุจุช ฺฉููุฏ:

```bash
POST /api/feedback
{
  "chatId": 123,
  "messageId": 456,
  "isHelpful": true,
  "feedbackText": "ูพุงุณุฎ ุนุงู ุจูุฏ"
}
```

## ๐ API Endpoints

### ุงุฏฺฏุฑ ู ุจุงุฒุฎูุฑุฏ

#### ุซุจุช ุจุงุฒุฎูุฑุฏ
```
POST /api/feedback
Body: {
  chatId: number,
  messageId: number,
  isHelpful: boolean,
  feedbackText?: string
}
```

#### ูพุฑุฏุงุฒุด ูฺฉุงููุงุช ุจุฑุง ุงุฏฺฏุฑ (Admin)
```
POST /api/admin/process-learning
Response: {
  success: boolean,
  learnedCount: number,
  message: string
}
```

#### ุฏุฑุงูุช ุขูุงุฑ ุงุฏฺฏุฑ (Admin)
```
GET /api/admin/learning-stats
Response: {
  totalKnowledge: number,
  averageQuality: number,
  totalUsage: number,
  byCategory: Array<{category: string, count: number}>
}
```

#### ุฏุฑุงูุช ูุณุช ุฏุงูุด (Admin)
```
GET /api/admin/learned-knowledge?category=ูุงู&limit=50
Response: Array<LearnedKnowledge>
```

#### ุญุฐู ุฏุงูุด (Admin)
```
DELETE /api/admin/learned-knowledge/:id
```

## ๐จ ุฑุงุจุท ฺฉุงุฑุจุฑ

### ูพูู ุงุฏฺฏุฑ (Admin)
ูพูู ุงุฏฺฏุฑ ุฏุฑ ุฏุงุดุจูุฑุฏ ุงุฏูู ุฏุฑ ุฏุณุชุฑุณ ุงุณุช:

1. ูุงุฑุฏ ูพูู ุงุฏูู ุดูุฏ
2. ุฑู ุชุจ "ุงุฏฺฏุฑ AI" ฺฉูฺฉ ฺฉูุฏ
3. ุขูุงุฑ ุงุฏฺฏุฑ ุฑุง ูุดุงูุฏู ฺฉูุฏ
4. ุฏุงูุด ุงุฏฺฏุฑ ุดุฏู ุฑุง ูุฏุฑุช ฺฉูุฏ
5. ุฏฺฉูู "ูพุฑุฏุงุฒุด ูฺฉุงููุงุช ุฌุฏุฏ" ุฑุง ุจุฑุง ุงุฏฺฏุฑ ุฏุณุช ุจุฒูุฏ

### ูฺฺฏโูุง ูพูู:
- **ฺฉุงุฑุชโูุง ุขูุงุฑ**: ููุงุด ฺฉู ุฏุงูุดุ ูุงูฺฏู ฺฉูุชุ ุชุนุฏุงุฏ ุงุณุชูุงุฏูุ ู ุชุนุฏุงุฏ ุฏุณุชูโุจูุฏโูุง
- **ููุชุฑ ุฏุณุชูโุจูุฏ**: ููุชุฑ ฺฉุฑุฏู ุฏุงูุด ุจุฑ ุงุณุงุณ ุฏุณุชู
- **ุฌุฏูู ุฏุงูุด**: ููุงุด ุณูุงูุ ูพุงุณุฎุ ุฏุณุชูุ ุงูุชุงุฒ ฺฉูุชุ ู ุชุนุฏุงุฏ ุงุณุชูุงุฏู
- **ุญุฐู ุฏุงูุด**: ุงูฺฉุงู ุญุฐู ุฏุงูุด ูุงูุฑุชุจุท

## ๐ ูุฒุงุง

1. **ุจูุจูุฏ ูุณุชูุฑ**: ูุฏู ุจุง ูุฑ ูฺฉุงููู ุจูุชุฑ ูโุดูุฏ
2. **ูพุงุณุฎโูุง ุณุฑุนโุชุฑ**: ุงุณุชูุงุฏู ุงุฒ ุฏุงูุด ุฐุฎุฑู ุดุฏู ุจุฑุง ูพุงุณุฎโูุง ุณุฑุนโุชุฑ
3. **ุณุงุฒฺฏุงุฑ ุจุง ฺฉุณุจโูฺฉุงุฑ**: ุงุฏฺฏุฑ ุงุฒ ุณูุงูุงุช ูุงูุน ฺฉุงุฑุจุฑุงู
4. **ฺฉุงูุด ูุฒูู**: ฺฉูุชุฑ ูุงุฒ ุจู fine-tuning ูุฏู
5. **ูุงุจู ูุฏุฑุช**: ุงุฏูู ฺฉูุชุฑู ฺฉุงูู ุจุฑ ุฏุงูุด ุงุฏฺฏุฑ ุดุฏู ุฏุงุฑุฏ

## ๐ ุขูุฏู

- **ุงุฏฺฏุฑ ุงุฒ ุจุงุฒุฎูุฑุฏ ููู**: ุงุฏฺฏุฑ ุงุฒ ูพุงุณุฎโูุง ูุงุฏุฑุณุช
- **ุงุฏฺฏุฑ ฺูุฏ ุฒุจุงูู**: ูพุดุชุจุงู ุงุฒ ุฒุจุงูโูุง ูุฎุชูู
- **ุงุฏฺฏุฑ ุงุฒ ูุงูโูุง**: ุงุณุชุฎุฑุงุฌ ุฏุงูุด ุงุฒ ูุงูโูุง PDF ุขูพููุฏ ุดุฏู
- **ุงุฏฺฏุฑ ุชุนุงูู**: ุงูฺฉุงู ูุฑุงุด ู ุจูุจูุฏ ุฏุงูุด ุชูุณุท ุงุฏูู
- **ุงุฏฺฏุฑ ุงุฒ ููุงุจุน ุฎุงุฑุฌ**: ุงุชุตุงู ุจู ููุงุจุน ุฏุงูุด ุฎุงุฑุฌ

## ๐ ุงููุช

- ุชูุงู APIูุง ุงุฏฺฏุฑ ููุท ุจุฑุง ุงุฏูู ุฏุฑ ุฏุณุชุฑุณ ุงุณุช
- ุฏุงูุด ุงุฏฺฏุฑ ุดุฏู ูุงุจู ุจุฑุฑุณ ู ุญุฐู ุชูุณุท ุงุฏูู ุงุณุช
- ุจุงุฒุฎูุฑุฏ ฺฉุงุฑุจุฑุงู ูุงุดูุงุณ ุฐุฎุฑู ููโุดูุฏ

## ๐ ูฺฉุงุช ููู

1. **ฺฉูุช ุฏุงุฏู**: ููุท ูฺฉุงููุงุช ุจุง ฺฉูุช ุจุฑุง ุงุฏฺฏุฑ ุงุณุชูุงุฏู ูโุดูุฏ
2. **ุญุฑู ุฎุตูุต**: ุงุทูุงุนุงุช ุดุฎุต ฺฉุงุฑุจุฑุงู ุฏุฑ ุฏุงูุด ุงุฏฺฏุฑ ุดุฏู ุฐุฎุฑู ููโุดูุฏ
3. **ูุฏุฑุช ุฏุงูุด**: ุงุฏูู ุจุงุฏ ุจู ุทูุฑ ููุธู ุฏุงูุด ุฑุง ุจุฑุฑุณ ู ูุฏุฑุช ฺฉูุฏ
4. **ุจูููโุณุงุฒ**: ุฏุงูุด ุจุง ุงูุชุงุฒ ฺฉูุช ูพุงู ุจุงุฏ ุญุฐู ุดูุฏ

## ๐๏ธ ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

1. **ุงุฌุงุฏ ุฌุฏุงูู ุฏุชุงุจุณ**:
   ```bash
   POST /api/db-init
   Body: { "adminKey": "mohamad.tir1383" }
   ```

2. **ูพุฑุฏุงุฒุด ูฺฉุงููุงุช ููุฌูุฏ**:
   ```bash
   POST /api/admin/process-learning
   ```

3. **ูุดุงูุฏู ูพูู ุงุฏฺฏุฑ**:
   - ูุงุฑุฏ ูพูู ุงุฏูู ุดูุฏ
   - ุฑู ุชุจ "ุงุฏฺฏุฑ AI" ฺฉูฺฉ ฺฉูุฏ

## ๐ ูพุดุชุจุงู

ุจุฑุง ุณูุงูุงุช ู ูุดฺฉูุงุช ูุฑุจูุท ุจู ุณุณุชู ุงุฏฺฏุฑุ ุจุง ุชู ุชูุณุนู ุชูุงุณ ุจฺฏุฑุฏ.
